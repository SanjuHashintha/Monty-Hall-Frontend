<div class="results-display">
  <!-- Summary Section -->
  <div class="summary-section">
    <div class="section-header">
      <i class="fas fa-chart-pie"></i>
      <h4>Simulation Results</h4>
      <span class="badge strategy-badge" [class.strategy-switch]="result.changeDoor" 
            [class.strategy-stay]="!result.changeDoor">
        {{ result.changeDoor ? 'Switching Strategy' : 'Staying Strategy' }}
      </span>
    </div>

    <div class="stats-grid">
      <!-- Total Games -->
      <div class="stat-card">
        <div class="stat-icon">
          <i class="fas fa-gamepad"></i>
        </div>
        <div class="stat-content">
          <div class="stat-value">{{ result.totalGames | number }}</div>
          <div class="stat-label">Total Games</div>
        </div>
      </div>

      <!-- Wins -->
      <div class="stat-card success">
        <div class="stat-icon">
          <i class="fas fa-trophy"></i>
        </div>
        <div class="stat-content">
          <div class="stat-value">{{ result.wins | number }}</div>
          <div class="stat-label">Wins</div>
          <div class="stat-percentage">{{ (result.wins / result.totalGames * 100) | number:'1.2-2' }}%</div>
        </div>
      </div>

      <!-- Losses -->
      <div class="stat-card danger">
        <div class="stat-icon">
          <i class="fas fa-times"></i>
        </div>
        <div class="stat-content">
          <div class="stat-value">{{ result.losses | number }}</div>
          <div class="stat-label">Losses</div>
          <div class="stat-percentage">{{ (result.losses / result.totalGames * 100) | number:'1.2-2' }}%</div>
        </div>
      </div>

      <!-- Win Rate -->
      <div class="stat-card primary">
        <div class="stat-icon">
          <i class="fas fa-chart-line"></i>
        </div>
        <div class="stat-content">
          <div class="stat-value">{{ result.winPercentage | number:'1.2-2' }}%</div>
          <div class="stat-label">Win Rate</div>
          <div class="stat-comparison">
            vs {{ result.changeDoor ? '33.33%' : '66.67%' }} expected
          </div>
        </div>
      </div>
    </div>

    <!-- Progress Visualization -->
    <div class="progress-visualization">
      <div class="progress-header">
        <span>Win/Loss Distribution</span>
        <span class="percentage">{{ result.winPercentage | number:'1.2-2' }}% wins</span>
      </div>
      <div class="progress-container">
        <div class="progress-bar">
          <div class="progress-fill success" [style.width]="result.winPercentage + '%'">
            <span class="progress-label">Wins</span>
          </div>
          <div class="progress-fill danger" [style.width]="(100 - result.winPercentage) + '%'">
            <span class="progress-label">Losses</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Game Visualization -->
  <div class="visualization-section" *ngIf="selectedGame" #visualizationSection>
    <div class="section-header">
      <i class="fas fa-eye"></i>
      <h4>Game Visualization</h4>
      <div class="step-controls">
        <button class="btn btn-step" (click)="previousStep()" [disabled]="currentStep === 0">
          <i class="fas fa-chevron-left"></i> Previous
        </button>
        <span class="step-indicator">Step {{ currentStep + 1 }}/3</span>
        <button class="btn btn-step" (click)="nextStep()" [disabled]="currentStep === 2">
          Next <i class="fas fa-chevron-right"></i>
        </button>
      </div>
    </div>

    <div class="visualization-content">
      <app-door-visualization 
        [gameResult]="selectedGame" 
        [currentStep]="currentStep">
      </app-door-visualization>

      <div class="game-details">
        <div class="detail-card" [class.active]="currentStep >= 0">
          <div class="detail-icon">
            <i class="fas fa-mouse-pointer"></i>
          </div>
          <div class="detail-content">
            <h6>Initial Selection</h6>
            <p>Door {{ selectedGame.selectedDoor + 1 }}</p>
          </div>
        </div>

        <div class="detail-card" [class.active]="currentStep >= 1">
          <div class="detail-icon">
            <i class="fas fa-eye"></i>
          </div>
          <div class="detail-content">
            <h6>Host Reveals</h6>
            <p>Door {{ selectedGame.revealedDoor + 1 }} (Goat)</p>
          </div>
        </div>

        <div class="detail-card" [class.active]="currentStep >= 2">
          <div class="detail-icon">
            <i class="fas fa-flag-checkered"></i>
          </div>
          <div class="detail-content">
            <h6>Final Choice</h6>
            <p>Door {{ selectedGame.finalDoor + 1 }}</p>
            <span class="result-badge" [class.win]="selectedGame.win" [class.loss]="!selectedGame.win">
              {{ selectedGame.win ? 'üèÜ Winner!' : '‚ùå Lost' }}
            </span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Game Results Table -->
  <div class="table-section">
    <div class="section-header">
      <i class="fas fa-table"></i>
      <h4>Individual Game Results</h4>
      <span class="table-info">Showing first {{ result.gameResults.slice(0, 10).length }} of {{ result.totalGames }} games</span>
    </div>

    <div class="table-container">
      <table class="results-table">
        <thead>
          <tr>
            <th>Game #</th>
            <th>Initial Door</th>
            <th>Revealed Door</th>
            <th>Final Door</th>
            <th>Result</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let game of result.gameResults.slice(0, 10); let i = index" 
              [class.win-row]="game.win" [class.loss-row]="!game.win">
            <td class="game-number">
              <span class="number-badge">{{ i + 1 }}</span>
            </td>
            <td class="door-cell">
              <span class="door-badge">üö™ {{ game.selectedDoor + 1 }}</span>
            </td>
            <td class="door-cell">
              <span class="door-badge goat">üêê {{ game.revealedDoor + 1 }}</span>
            </td>
            <td class="door-cell">
              <span class="door-badge" [class.car]="game.win" [class.goat]="!game.win">
                {{ game.win ? 'üöó ' : 'üêê ' }}{{ game.finalDoor + 1 }}
              </span>
            </td>
            <td class="result-cell">
              <span class="result-indicator" [class.win]="game.win" [class.loss]="!game.win">
                <i class="fas" [class.fa-check]="game.win" [class.fa-times]="!game.win"></i>
                {{ game.win ? 'Win' : 'Loss' }}
              </span>
            </td>
            <td class="action-cell">
  <button class="btn btn-view" (click)="showGameDetails(game)" [disabled]="selectedGame === game">
    <span class="btn-content">
      <i class="fas fa-search"></i> View
    </span>
    <span class="btn-loading" *ngIf="selectedGame === game">
      <i class="fas fa-spinner fa-spin"></i>
    </span>
  </button>
</td>
          </tr>
        </tbody>
      </table>
    </div>

    <div class="table-footer">
      <div class="pagination-info">
        Showing 1-{{ result.gameResults.slice(0, 10).length }} of {{ result.totalGames }} results
      </div>
      <div class="table-actions">
        <button class="btn btn-sm btn-outline-primary">
          <i class="fas fa-download"></i> Export
        </button>
      </div>
    </div>
  </div>

  <!-- Strategy Analysis -->
  <div class="analysis-section">
    <div class="section-header">
      <i class="fas fa-brain"></i>
      <h4>Strategy Analysis</h4>
    </div>

    <div class="analysis-content">
      <div class="analysis-card" [class.better]="result.changeDoor" [class.worse]="!result.changeDoor">
        <div class="analysis-icon">
          <i class="fas" [class.fa-arrow-up]="result.changeDoor" [class.fa-arrow-down]="!result.changeDoor"></i>
        </div>
        <div class="analysis-text">
          <h5>{{ result.changeDoor ? 'Optimal Strategy' : 'Suboptimal Strategy' }}</h5>
          <p>
            {{ result.changeDoor ? 
               'Switching doors gives you a 66.7% chance of winning. You made the right choice!' :
               'Staying with your initial choice gives you only a 33.3% chance of winning. Consider switching next time!'
            }}
          </p>
        </div>
        <div class="analysis-stats">
          <div class="expected-rate">
            Expected: {{ result.changeDoor ? '66.67%' : '33.33%' }}
          </div>
          <div class="actual-rate" [class.better]="result.winPercentage > (result.changeDoor ? 66.67 : 33.33)"
               [class.worse]="result.winPercentage < (result.changeDoor ? 66.67 : 33.33)">
            Actual: {{ result.winPercentage | number:'1.2-2' }}%
          </div>
        </div>
      </div>
    </div>
  </div>
</div>